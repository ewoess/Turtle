<!DOCTYPE html>
<html>
<head>
    <title>Speed Curve Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #1a1a1a;
            color: #fff;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        canvas {
            border: 1px solid #333;
            background: #000;
            margin: 20px 0;
        }
        .speed-levels {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }
        .speed-item {
            background: #333;
            padding: 10px;
            border-radius: 5px;
            border-left: 4px solid #33ffaa;
        }
        .speed-value {
            font-weight: bold;
            color: #33ffaa;
        }
        .steps {
            color: #ccc;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Speed Curve Visualization</h1>
        <p>This shows the custom mapping with Ultra Slow (1) = 0.25 steps per frame (1 step every 4 frames):</p>
        
        <canvas id="graph" width="700" height="400"></canvas>
        
        <div class="speed-levels">
            <div class="speed-item">
                <div class="speed-value">Speed 1 (Ultra Slow)</div>
                <div class="steps">0.25 steps per frame (1 step every 4 frames)</div>
            </div>
            <div class="speed-item">
                <div class="speed-value">Speed 2</div>
                <div class="steps">2 steps per frame</div>
            </div>
            <div class="speed-item">
                <div class="speed-value">Speed 3 (Slow)</div>
                <div class="steps">2 steps per frame</div>
            </div>
            <div class="speed-item">
                <div class="speed-value">Speed 4</div>
                <div class="steps">3 steps per frame</div>
            </div>
            <div class="speed-item">
                <div class="speed-value">Speed 5 (Medium)</div>
                <div class="steps">4 steps per frame</div>
            </div>
            <div class="speed-item">
                <div class="speed-value">Speed 6</div>
                <div class="steps">9 steps per frame</div>
            </div>
            <div class="speed-item">
                <div class="speed-value">Speed 7 (Fast)</div>
                <div class="steps">14 steps per frame</div>
            </div>
            <div class="speed-item">
                <div class="speed-value">Speed 8</div>
                <div class="steps">19 steps per frame</div>
            </div>
            <div class="speed-item">
                <div class="speed-value">Speed 9 (Ultra Fast)</div>
                <div class="steps">24 steps per frame</div>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('graph');
        const ctx = canvas.getContext('2d');
        
        // Graph dimensions
        const width = canvas.width;
        const height = canvas.height;
        const padding = 40;
        const graphWidth = width - 2 * padding;
        const graphHeight = height - 2 * padding;
        
        // Function to calculate steps per frame
        function calculateSteps(speed) {
            if (speed === 1) {
                // Speed 1: very slow (0.25 steps per frame = 1 step every 4 frames)
                return 0.25;
            } else if (speed <= 5) {
                // Speeds 2-5: linear from 2 to 4
                return 2 + Math.floor((speed - 2) * (2 / 3));
            } else {
                // Speeds 6-9: linear from 4 to 24
                return 4 + Math.floor((speed - 5) * (20 / 4));
            }
        }
        
        // Draw grid
        function drawGrid() {
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            
            // Vertical grid lines
            for (let i = 0; i <= 10; i++) {
                const x = padding + (i / 10) * graphWidth;
                ctx.beginPath();
                ctx.moveTo(x, padding);
                ctx.lineTo(x, height - padding);
                ctx.stroke();
            }
            
            // Horizontal grid lines
            for (let i = 0; i <= 10; i++) {
                const y = height - padding - (i / 10) * graphHeight;
                ctx.beginPath();
                ctx.moveTo(padding, y);
                ctx.lineTo(width - padding, y);
                ctx.stroke();
            }
        }
        
        // Draw axes
        function drawAxes() {
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 2;
            
            // X-axis
            ctx.beginPath();
            ctx.moveTo(padding, height - padding);
            ctx.lineTo(width - padding, height - padding);
            ctx.stroke();
            
            // Y-axis
            ctx.beginPath();
            ctx.moveTo(padding, padding);
            ctx.lineTo(padding, height - padding);
            ctx.stroke();
            
            // Labels
            ctx.fillStyle = '#ccc';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            
            // X-axis labels
            for (let i = 0; i <= 10; i++) {
                const x = padding + (i / 10) * graphWidth;
                const value = i;
                ctx.fillText(value.toString(), x, height - padding + 20);
            }
            
            // Y-axis labels
            ctx.textAlign = 'right';
            for (let i = 0; i <= 10; i++) {
                const y = height - padding - (i / 10) * graphHeight;
                const value = Math.round((i / 10) * 25);
                ctx.fillText(value.toString(), padding - 10, y + 4);
            }
        }
        
        // Draw curve
        function drawCurve() {
            ctx.strokeStyle = '#33ffaa';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            for (let i = 0; i <= graphWidth; i++) {
                const speed = (i / graphWidth) * 10;
                const steps = calculateSteps(speed);
                const x = padding + i;
                const y = height - padding - (steps / 25) * graphHeight;
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
        }
        
        // Draw speed level points
        function drawSpeedPoints() {
            const speedLevels = [1, 2, 3, 4, 5, 6, 7, 8, 9];
            const labels = ['1\nUltra\nSlow', '2', '3\nSlow', '4', '5\nMedium', '6', '7\nFast', '8', '9\nUltra\nFast'];
            
            ctx.fillStyle = '#ff6b6b';
            ctx.font = '10px Arial';
            ctx.textAlign = 'center';
            
            speedLevels.forEach((speed, index) => {
                const steps = calculateSteps(speed);
                const x = padding + (speed / 10) * graphWidth;
                const y = height - padding - (steps / 25) * graphHeight;
                
                // Draw point
                ctx.beginPath();
                ctx.arc(x, y, 6, 0, 2 * Math.PI);
                ctx.fill();
                
                // Draw label
                ctx.fillStyle = '#fff';
                ctx.fillText(labels[index], x, y - 15);
                ctx.fillStyle = '#ff6b6b';
            });
        }
        
        // Draw title and labels
        function drawLabels() {
            ctx.fillStyle = '#fff';
            ctx.font = '16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Speed vs Steps Per Frame', width / 2, 20);
            
            ctx.font = '12px Arial';
            ctx.fillText('Speed Level (1-9)', width / 2, height - 10);
            
            ctx.save();
            ctx.translate(15, height / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText('Steps Per Frame', 0, 0);
            ctx.restore();
        }
        
        // Main drawing function
        function draw() {
            // Clear canvas
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, width, height);
            
            drawGrid();
            drawAxes();
            drawCurve();
            drawSpeedPoints();
            drawLabels();
        }
        
        // Initialize
        draw();
    </script>
</body>
</html>
